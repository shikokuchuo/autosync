[{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"project-overview","dir":"","previous_headings":"","what":"Project Overview","title":"CLAUDE.md","text":"autosync R package implements WebSocket sync server Automerge CRDT documents. implements automerge-repo protocol, enabling R serve synchronization hub Automerge clients R, JavaScript, Rust, languages.","code":""},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"development-commands","dir":"","previous_headings":"","what":"Development Commands","title":"CLAUDE.md","text":"","code":"# Run all tests devtools::test()  # Run a single test file testthat::test_file(\"tests/testthat/test-server.R\")  # Check package (R CMD check) devtools::check()  # Build documentation devtools::document()  # Install the package locally devtools::install()"},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"dependencies","dir":"","previous_headings":"","what":"Dependencies","title":"CLAUDE.md","text":"Requires development versions packages: - automerge posit-dev/automerge-r - nanonext r-lib/nanonext@stream branch Install : pak::pak(\"shikokuchuo/autosync\")","code":""},{"path":[]},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"core-components","dir":"","previous_headings":"Architecture","what":"Core Components","title":"CLAUDE.md","text":"Server (R/server.R): amsync_server() creates WebSocket server using nanonext’s http_server(). server maintains state environments : - documents - Loaded Automerge documents keyed document ID - sync_states - Per-client, per-document sync states (nested: sync_states[[client_id]][[doc_id]]) - connections - WebSocket connection objects keyed temp ID client ID - doc_peers - Document--peer mapping broadcasting Handlers (R/handlers.R): Message routing via handle_message() dispatches type-specific handlers: - handle_join - Protocol handshake, validates version “1” - handle_sync - Document synchronization using Automerge sync protocol - handle_ephemeral - Transient message forwarding (point--point broadcast) - broadcast_sync - Propagates changes peers subscribed document Client (R/client.R): amsync_fetch() implements client-side protocol fetching documents automerge-repo server. Storage (R/storage.R): Persistence layer using .automerge files configurable data directory.","code":""},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"protocol-details","dir":"","previous_headings":"Architecture","what":"Protocol Details","title":"CLAUDE.md","text":"Messages CBOR-encoded binary frames. Key message types: - join/peer - Connection handshake peer IDs metadata - request/sync - Document sync Automerge sync state data - ephemeral - Non-persisted messages real-time features - error/doc-unavailable - Error handling Document IDs Base58Check-encoded 16-byte random values. Peer IDs Base64-encoded.","code":""},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"key-imports","dir":"","previous_headings":"Architecture","what":"Key Imports","title":"CLAUDE.md","text":"automerge - CRDT operations (am_create, am_sync_encode/decode, am_save/load) nanonext - WebSocket server async /O secretbase - CBOR encoding (cborenc/cbordec) Base58/Base64 later - Event loop integration (run_now async recv)","code":""},{"path":"http://shikokuchuo.net/autosync/CLAUDE.html","id":"testing","dir":"","previous_headings":"","what":"Testing","title":"CLAUDE.md","text":"Tests use incrementing ports starting 4000 via get_test_port() helper avoid conflicts. Test files cover server, client, handlers, storage, integration scenarios.","code":""},{"path":"http://shikokuchuo.net/autosync/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Charlie Gao. Author, maintainer. . Copyright holder, funder.","code":""},{"path":"http://shikokuchuo.net/autosync/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gao C (2026). autosync: Automerge Sync Server R. R package version 0.0.1.9000, https://github.com/shikokuchuo/autosync.","code":"@Manual{,   title = {autosync: Automerge Sync Server for R},   author = {Charlie Gao},   year = {2026},   note = {R package version 0.0.1.9000},   url = {https://github.com/shikokuchuo/autosync}, }"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"autosync","dir":"","previous_headings":"","what":"Automerge Sync Server for R","title":"Automerge Sync Server for R","text":"R sync server Automerge CRDT documents. Implements automerge-repo WebSocket protocol, enabling R serve synchronization hub Automerge clients R, JavaScript, Rust, languages.","code":""},{"path":"http://shikokuchuo.net/autosync/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"Automerge Sync Server for R","text":"Full automerge-repo protocol compatibility (interoperates sync.automerge.org) Secure connections via TLS (wss://) Persistent document storage Ephemeral message broadcasting Client functions fetching documents remote servers","code":""},{"path":"http://shikokuchuo.net/autosync/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Automerge Sync Server for R","text":"","code":"pak::pak(\"shikokuchuo/autosync\")"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"server","dir":"","previous_headings":"","what":"Server","title":"Automerge Sync Server for R","text":"Create WebSocket sync server: TLS secure connections:","code":"library(autosync)  server <- amsync_server(port = 3030) server$start()  # Server runs non-blocking in the background  server$stop() cert <- nanonext::write_cert() tls <- nanonext::tls_config(server = cert$server)  server <- amsync_server(port = 8080, tls = tls) server$start()"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"document-management","dir":"","previous_headings":"Server","what":"Document management","title":"Automerge Sync Server for R","text":"","code":"# Create a new document doc_id <- create_document(server)  # List all documents list_documents(server)  # Get a document doc <- get_document(server, doc_id)"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"connecting-from-javascript","dir":"","previous_headings":"Server","what":"Connecting from JavaScript","title":"Automerge Sync Server for R","text":"","code":"import { Repo } from \"@automerge/automerge-repo\" import { BrowserWebSocketClientAdapter } from \"@automerge/automerge-repo-network-websocket\"  const repo = new Repo({   network: [new BrowserWebSocketClientAdapter(\"ws://localhost:3030\")] })"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"client","dir":"","previous_headings":"","what":"Client","title":"Automerge Sync Server for R","text":"Fetch documents automerge-repo sync server: Debug sync issues inspect helper:","code":"# Fetch from public sync server doc <- amsync_fetch(\"wss://sync.automerge.org\", \"your-document-id\")  # Inspect document structure automerge::am_keys(doc) amsync_inspect(\"wss://sync.automerge.org\", \"your-document-id\")"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"utilities","dir":"","previous_headings":"","what":"Utilities","title":"Automerge Sync Server for R","text":"Generate document IDs compatible automerge-repo:","code":"doc_id <- generate_document_id()"},{"path":"http://shikokuchuo.net/autosync/index.html","id":"shiny-collaborative-editor","dir":"","previous_headings":"","what":"Shiny Collaborative Editor","title":"Automerge Sync Server for R","text":"real-time collaborative text editor widget, see autoedit package provides CodeMirror-based editor connects autosync servers.","code":""},{"path":"http://shikokuchuo.net/autosync/index.html","id":"links","dir":"","previous_headings":"","what":"Links","title":"Automerge Sync Server for R","text":"automerge - R bindings Automerge CRDT","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch a document from a sync server — amsync_fetch","title":"Fetch a document from a sync server — amsync_fetch","text":"Connects automerge-repo sync server retrieves document ID. useful debugging sync issues fetching documents remote servers like sync.automerge.org.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch a document from a sync server — amsync_fetch","text":"","code":"amsync_fetch(url, doc_id, timeout = 5000L, tls = NULL, verbose = FALSE)"},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch a document from a sync server — amsync_fetch","text":"url WebSocket URL sync server (e.g., \"ws://localhost:3030/\" \"wss://sync.automerge.org/\"). Note: trailing slash may required. doc_id Document ID (base58check encoded string) timeout Timeout milliseconds receive operation. Default 5000. tls (optional) secure wss:// connections servers self-signed custom CA certificates, TLS configuration object created nanonext::tls_config(). verbose Logical, print debug messages. Default FALSE.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch a document from a sync server — amsync_fetch","text":"automerge document object containing fetched data.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fetch a document from a sync server — amsync_fetch","text":"function implements automerge-repo sync protocol: Connects via WebSocket Sends join message peer ID Receives peer response server Sends sync request specified document Receives applies sync messages complete Sync considered complete new messages arrive within timeout least one sync round.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_fetch.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch a document from a sync server — amsync_fetch","text":"","code":"if (FALSE) { # interactive() # Fetch from public sync server doc <- amsync_fetch(\"wss://sync.automerge.org\", \"4F63WJPDzbHkkfKa66h1Qrr1sC5U\")  # Fetch from local server with debug output doc <- amsync_fetch(\"ws://localhost:3030\", \"myDocId\", verbose = TRUE)  # Fetch from server with self-signed certificate cert <- nanonext::write_cert() tls <- nanonext::tls_config(client = cert$client) doc <- amsync_fetch(\"wss://localhost:3030\", \"myDocId\", tls = tls)  # Inspect the document automerge::am_keys(doc) }"},{"path":"http://shikokuchuo.net/autosync/reference/amsync_inspect.html","id":null,"dir":"Reference","previous_headings":"","what":"Inspect a document from a sync server — amsync_inspect","title":"Inspect a document from a sync server — amsync_inspect","text":"Fetches document prints structure debugging.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_inspect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Inspect a document from a sync server — amsync_inspect","text":"","code":"amsync_inspect(url, doc_id, timeout = 5000L, tls = NULL, max_depth = 2)"},{"path":"http://shikokuchuo.net/autosync/reference/amsync_inspect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Inspect a document from a sync server — amsync_inspect","text":"url WebSocket URL sync server. doc_id Document ID (base58check encoded string). timeout Timeout milliseconds. Default 5000. tls (optional) secure wss:// connections servers self-signed custom CA certificates, TLS configuration object created nanonext::tls_config(). max_depth Maximum depth recurse nested structures. Default 2.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_inspect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Inspect a document from a sync server — amsync_inspect","text":"Invisibly returns fetched automerge document.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_inspect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Inspect a document from a sync server — amsync_inspect","text":"","code":"if (FALSE) { # \\dontrun{ # Inspect document structure from public server amsync_inspect(\"wss://sync.automerge.org/\", \"4F63WJPDzbHkkfKa66h1Qrr1sC5U\") } # }"},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an Automerge sync server — amsync_server","title":"Create an Automerge sync server — amsync_server","text":"Creates WebSocket server implements automerge-repo sync protocol, compatible JavaScript, Rust, Automerge clients.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an Automerge sync server — amsync_server","text":"","code":"amsync_server(   port = 3030L,   host = \"0.0.0.0\",   data_dir = \".amrg\",   auto_create_docs = TRUE,   storage_id = NULL,   tls = NULL )"},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an Automerge sync server — amsync_server","text":"port Port listen . Default 3030. host Host address bind . Default \"0.0.0.0\" (interfaces). data_dir Directory persistent document storage. Default \".amrg\". auto_create_docs Logical, whether auto-create documents clients request unknown document IDs. Default TRUE. storage_id Optional storage ID server. NULL (default), generates new persistent identity. Set NA ephemeral server (persistence identity). tls (optional) secure wss:// connections, TLS configuration object created nanonext::tls_config().","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an Automerge sync server — amsync_server","text":"amsync_server object inheriting 'nanoServer', $start() $stop() methods.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create an Automerge sync server — amsync_server","text":"returned server inherits nanonext's nanoServer class provides $start() $stop() methods non-blocking operation.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/amsync_server.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an Automerge sync server — amsync_server","text":"","code":"if (FALSE) { # interactive() # Create and start a server server <- amsync_server() server$start()  # Server is now running in the background # ...do other work...  # Stop when done server$stop()  # Custom port with TLS cert <- nanonext::write_cert() tls <- nanonext::tls_config(server = cert$server) server <- amsync_server(port = 8080, tls = tls) server$start() server$stop() }"},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":null,"dir":"Reference","previous_headings":"","what":"autosync: Automerge Sync Server for R — autosync-package","title":"autosync: Automerge Sync Server for R — autosync-package","text":"WebSocket-based synchronization server Automerge documents, compatible automerge-repo protocol used sync.automerge.org. Enables R serve sync hub JavaScript, Rust, Automerge clients collaborative applications.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":"main-functions","dir":"Reference","previous_headings":"","what":"Main Functions","title":"autosync: Automerge Sync Server for R — autosync-package","text":"amsync_server() Create new sync server $start() $stop() methods","code":""},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":"document-management","dir":"Reference","previous_headings":"","what":"Document Management","title":"autosync: Automerge Sync Server for R — autosync-package","text":"create_document() Create new document get_document() Retrieve document ID list_documents() List document IDs generate_document_id() Generate new document ID","code":""},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":"protocol","dir":"Reference","previous_headings":"","what":"Protocol","title":"autosync: Automerge Sync Server for R — autosync-package","text":"server implements automerge-repo sync protocol WebSockets. Messages CBOR-encoded include: join/peer Handshake messages connection establishment request/sync Document synchronization messages ephemeral Transient messages forwarded without persistence error Error notifications","code":""},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":"example","dir":"Reference","previous_headings":"","what":"Example","title":"autosync: Automerge Sync Server for R — autosync-package","text":"","code":"# Create and start a server server <- amsync_server(port = 3030) server$start()  # Stop when done server$stop()"},{"path":[]},{"path":"http://shikokuchuo.net/autosync/reference/autosync-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"autosync: Automerge Sync Server for R — autosync-package","text":"Maintainer: Charlie Gao charlie.gao@posit.co (ORCID) contributors: Posit Software, PBC (ROR) [copyright holder, funder]","code":""},{"path":"http://shikokuchuo.net/autosync/reference/create_document.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new document on the server — create_document","title":"Create a new document on the server — create_document","text":"Creates new empty Automerge document registers server.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/create_document.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new document on the server — create_document","text":"","code":"create_document(server, doc_id = NULL)"},{"path":"http://shikokuchuo.net/autosync/reference/create_document.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new document on the server — create_document","text":"server amsync_server object. doc_id Optional document ID. NULL, generates new ID.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/create_document.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new document on the server — create_document","text":"Document ID string.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/generate_document_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a new document ID — generate_document_id","title":"Generate a new document ID — generate_document_id","text":"Creates new unique document ID compatible automerge-repo. ID 16-byte random value encoded Base58Check.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/generate_document_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a new document ID — generate_document_id","text":"","code":"generate_document_id()"},{"path":"http://shikokuchuo.net/autosync/reference/generate_document_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a new document ID — generate_document_id","text":"Character string (Base58Check encoded).","code":""},{"path":"http://shikokuchuo.net/autosync/reference/get_document.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a document from the server — get_document","title":"Get a document from the server — get_document","text":"Retrieves Automerge document ID.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/get_document.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a document from the server — get_document","text":"","code":"get_document(server, doc_id)"},{"path":"http://shikokuchuo.net/autosync/reference/get_document.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a document from the server — get_document","text":"server amsync_server object. doc_id Document ID string.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/get_document.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a document from the server — get_document","text":"Automerge document object, NULL found.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/list_documents.html","id":null,"dir":"Reference","previous_headings":"","what":"List all document IDs — list_documents","title":"List all document IDs — list_documents","text":"Returns IDs documents currently loaded server.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/list_documents.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List all document IDs — list_documents","text":"","code":"list_documents(server)"},{"path":"http://shikokuchuo.net/autosync/reference/list_documents.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List all document IDs — list_documents","text":"server amsync_server object.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/list_documents.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List all document IDs — list_documents","text":"Character vector document IDs.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/print.amsync_server.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for amsync_server — print.amsync_server","title":"Print method for amsync_server — print.amsync_server","text":"Print method amsync_server","code":""},{"path":"http://shikokuchuo.net/autosync/reference/print.amsync_server.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for amsync_server — print.amsync_server","text":"","code":"# S3 method for class 'amsync_server' print(x, ...)"},{"path":"http://shikokuchuo.net/autosync/reference/print.amsync_server.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for amsync_server — print.amsync_server","text":"x amsync_server object. ... Ignored.","code":""},{"path":"http://shikokuchuo.net/autosync/reference/print.amsync_server.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for amsync_server — print.amsync_server","text":"Invisibly returns x.","code":""},{"path":[]},{"path":"http://shikokuchuo.net/autosync/news/index.html","id":"autosync-001","dir":"Changelog","previous_headings":"","what":"autosync 0.0.1","title":"autosync 0.0.1","text":"Initial version.","code":""}]
